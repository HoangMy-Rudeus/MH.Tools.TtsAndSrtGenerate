# Transformation Example

> **Visual guide showing before and after running the setup scripts**
>
> Generated by Copilot

## Command Used

```bash
./setup-docs.sh CategoryService category 9311 categorize_db \
    "The Category Service manages income and expense categories"
```

## File Structure Changes

### Before
```
ExpenseVault.CustomService/
├── ExpenseVault.CustomService.API/
│   ├── ExpenseVault.CustomService.API.csproj
│   ├── Program.cs
│   └── appsettings.json
├── ExpenseVault.CustomService.Application/
│   └── ExpenseVault.CustomService.Application.csproj
├── ExpenseVault.CustomService.Domain/
│   └── ExpenseVault.CustomService.Domain.csproj
├── ExpenseVault.CustomService.Infrastructure/
│   └── ExpenseVault.CustomService.Infrastructure.csproj
└── tests/
    ├── ExpenseVault.CustomService.API.IntegrationTests/
    ├── ExpenseVault.CustomService.Application.UnitTests/
    ├── ExpenseVault.CustomService.Domain.UnitTests/
    └── ExpenseVault.CustomService.Infrastructure.UnitTests/
```

### After
```
ExpenseVault.CategoryService/
├── ExpenseVault.CategoryService.API/
│   ├── ExpenseVault.CategoryService.API.csproj
│   ├── Program.cs
│   └── appsettings.json
├── ExpenseVault.CategoryService.Application/
│   └── ExpenseVault.CategoryService.Application.csproj
├── ExpenseVault.CategoryService.Domain/
│   └── ExpenseVault.CategoryService.Domain.csproj
├── ExpenseVault.CategoryService.Infrastructure/
│   └── ExpenseVault.CategoryService.Infrastructure.csproj
└── tests/
    ├── ExpenseVault.CategoryService.API.IntegrationTests/
    ├── ExpenseVault.CategoryService.Application.UnitTests/
    ├── ExpenseVault.CategoryService.Domain.UnitTests/
    └── ExpenseVault.CategoryService.Infrastructure.UnitTests/
```

## Code Changes

### Program.cs

#### Before
```csharp
namespace ExpenseVault.CustomService.API;

public class Program
{
    public static void Main(string[] args)
    {
        var builder = WebApplication.CreateBuilder(args);
        
        // Service name: CustomService
        builder.Services.AddInfrastructure(builder.Configuration);
        
        var app = builder.Build();
        app.Run();
    }
}
```

#### After
```csharp
namespace ExpenseVault.CategoryService.API;

public class Program
{
    public static void Main(string[] args)
    {
        var builder = WebApplication.CreateBuilder(args);
        
        // Service name: CategoryService
        builder.Services.AddInfrastructure(builder.Configuration);
        
        var app = builder.Build();
        app.Run();
    }
}
```

### appsettings.json

#### Before
```json
{
  "ConnectionStrings": {
    "DefaultConnection": "Host=localhost;Port=5432;Database=customdb;Username=postgres;Password=postgres"
  },
  "Kestrel": {
    "Endpoints": {
      "Http": {
        "Url": "http://localhost:9400"
      }
    }
  },
  "ServiceInfo": {
    "Name": "[ServiceName]",
    "Description": "[DESCRIPTION]"
  }
}
```

#### After
```json
{
  "ConnectionStrings": {
    "DefaultConnection": "Host=localhost;Port=5432;Database=categorize_db;Username=postgres;Password=postgres"
  },
  "Kestrel": {
    "Endpoints": {
      "Http": {
        "Url": "http://localhost:9311"
      }
    }
  },
  "ServiceInfo": {
    "Name": "CategoryService",
    "Description": "The Category Service manages income and expense categories"
  }
}
```

### Project File (.csproj)

#### Before (ExpenseVault.CustomService.API.csproj)
```xml
<Project Sdk="Microsoft.NET.Sdk.Web">
  <PropertyGroup>
    <TargetFramework>net10.0</TargetFramework>
    <RootNamespace>ExpenseVault.CustomService.API</RootNamespace>
    <AssemblyName>ExpenseVault.CustomService.API</AssemblyName>
  </PropertyGroup>

  <ItemGroup>
    <ProjectReference Include="..\ExpenseVault.CustomService.Application\ExpenseVault.CustomService.Application.csproj" />
    <ProjectReference Include="..\ExpenseVault.CustomService.Infrastructure\ExpenseVault.CustomService.Infrastructure.csproj" />
  </ItemGroup>
</Project>
```

#### After (ExpenseVault.CategoryService.API.csproj)
```xml
<Project Sdk="Microsoft.NET.Sdk.Web">
  <PropertyGroup>
    <TargetFramework>net10.0</TargetFramework>
    <RootNamespace>ExpenseVault.CategoryService.API</RootNamespace>
    <AssemblyName>ExpenseVault.CategoryService.API</AssemblyName>
  </PropertyGroup>

  <ItemGroup>
    <ProjectReference Include="..\ExpenseVault.CategoryService.Application\ExpenseVault.CategoryService.Application.csproj" />
    <ProjectReference Include="..\ExpenseVault.CategoryService.Infrastructure\ExpenseVault.CategoryService.Infrastructure.csproj" />
  </ItemGroup>
</Project>
```

### ApplicationDbContext.cs

#### Before
```csharp
using Microsoft.EntityFrameworkCore;

namespace ExpenseVault.CustomService.Infrastructure.Persistence;

public class ApplicationDbContext : DbContext
{
    public ApplicationDbContext(DbContextOptions<ApplicationDbContext> options)
        : base(options)
    {
    }

    // DbSets for CustomService entities
    public DbSet<CustomItem> CustomItems => Set<CustomItem>();
    public DbSet<CustomCategory> CustomCategories => Set<CustomCategory>();

    protected override void OnModelCreating(ModelBuilder modelBuilder)
    {
        base.OnModelCreating(modelBuilder);
        
        // Apply configurations
        modelBuilder.ApplyConfigurationsFromAssembly(
            typeof(ApplicationDbContext).Assembly);
    }
}
```

#### After
```csharp
using Microsoft.EntityFrameworkCore;

namespace ExpenseVault.CategoryService.Infrastructure.Persistence;

public class ApplicationDbContext : DbContext
{
    public ApplicationDbContext(DbContextOptions<ApplicationDbContext> options)
        : base(options)
    {
    }

    // DbSets for CategoryService entities
    public DbSet<CustomItem> CustomItems => Set<CustomItem>();
    public DbSet<CustomCategory> CustomCategories => Set<CustomCategory>();

    protected override void OnModelCreating(ModelBuilder modelBuilder)
    {
        base.OnModelCreating(modelBuilder);
        
        // Apply configurations
        modelBuilder.ApplyConfigurationsFromAssembly(
            typeof(ApplicationDbContext).Assembly);
    }
}
```

### README.md

#### Before
```markdown
# ExpenseVault.CustomService - Boilerplate Template

> **Production-ready .NET 10 microservice boilerplate**

[ServiceName] is a [DESCRIPTION].

## Quick Start

```bash
dotnet run --project ExpenseVault.CustomService.API
open http://localhost:9400/swagger
```

## Configuration

- Port: [PORT]
- Database: [dbname]
```

#### After
```markdown
# ExpenseVault.CategoryService - Boilerplate Template

> **Production-ready .NET 10 microservice boilerplate**

CategoryService is a The Category Service manages income and expense categories.

## Quick Start

```bash
dotnet run --project ExpenseVault.CategoryService.API
open http://localhost:9311/swagger
```

## Configuration

- Port: 9311
- Database: categorize_db
```

### docker-compose.yml

#### Before
```yaml
version: '3.8'

services:
  postgres:
    image: postgres:17-alpine
    container_name: customservice-postgres
    environment:
      POSTGRES_DB: customdb
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: postgres
    ports:
      - "5432:5432"

  customservice-api:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: customservice-api
    ports:
      - "9400:9400"
    environment:
      - ASPNETCORE_ENVIRONMENT=Development
      - ConnectionStrings__DefaultConnection=Host=postgres;Port=5432;Database=customdb;Username=postgres;Password=postgres
```

#### After
```yaml
version: '3.8'

services:
  postgres:
    image: postgres:17-alpine
    container_name: categoryservice-postgres
    environment:
      POSTGRES_DB: categorize_db
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: postgres
    ports:
      - "5432:5432"

  categoryservice-api:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: categoryservice-api
    ports:
      - "9311:9311"
    environment:
      - ASPNETCORE_ENVIRONMENT=Environment
      - ConnectionStrings__DefaultConnection=Host=postgres;Port=5432;Database=categorize_db;Username=postgres;Password=postgres
```

## Summary of Changes

| Item | Before | After |
|------|--------|-------|
| **Namespace** | `ExpenseVault.CustomService.*` | `ExpenseVault.CategoryService.*` |
| **Project Names** | `ExpenseVault.CustomService.*` | `ExpenseVault.CategoryService.*` |
| **Directory Names** | `ExpenseVault.CustomService.*` | `ExpenseVault.CategoryService.*` |
| **Database Name** | `customdb` | `categorize_db` |
| **HTTP Port** | `9400` | `9311` |
| **Service ID** | `[service]` | `category` |
| **Description** | `[DESCRIPTION]` | `The Category Service manages...` |

## Verification Results

```
====================================
Setup Complete!
====================================

Statistics:
  Directories renamed: 8
  Files renamed:       12
  Files scanned:       47
  Files modified:      45
  Total replacements:  234

Phase 4: Verification...
  ✓ No remaining placeholders found!
  ✓ No remaining CustomService references found!

Service transformation complete!

Your new service: ExpenseVault.CategoryService
  Port:     9311
  Database: categorize_db
```

## Next Steps After Transformation

1. **Build the solution**
   ```bash
   dotnet build
   ```

2. **Run migrations**
   ```bash
   dotnet ef database update --project ExpenseVault.CategoryService.API
   ```

3. **Start the service**
   ```bash
   dotnet run --project ExpenseVault.CategoryService.API
   ```

4. **Test endpoints**
   ```bash
   curl http://localhost:9311/health
   ```

5. **Open Swagger**
   - Navigate to: http://localhost:9311/swagger

6. **Customize domain entities**
   - Update `Domain/Entities/` with category-specific entities
   - Remove or modify `CustomItem` and `CustomCategory` samples

7. **Commit changes**
   ```bash
   git add .
   git commit -m "Initialize CategoryService from template"
   git push
   ```

---

**Generated by Copilot**
