# Getting Started with ExpenseVault.TransactionService

<!-- Generated by Copilot -->

> **Estimated time**: 30-45 minutes

This tutorial will guide you through setting up a complete development environment for the ExpenseVault.TransactionService.

## Prerequisites

Before you begin, ensure you have the following installed:

- **.NET 10 SDK** - [Download](https://dotnet.microsoft.com/download)
- **Docker Desktop** - [Download](https://www.docker.com/products/docker-desktop)
- **Git** - [Download](https://git-scm.com/downloads)
- **IDE**: Visual Studio 2022 or VS Code with C# Dev Kit

### Verify Prerequisites

```powershell
# Check .NET version
dotnet --version
# Expected: 10.0.x

# Check Docker
docker --version
# Expected: Docker version 24.x or higher

# Check Git
git --version
```

## Step 1: Clone the Repository

```powershell
# Clone the main repository
git clone https://github.com/your-org/ExpenseVault.TransactionService.git

# Navigate to the project directory
cd ExpenseVault.TransactionService

# Initialize and update submodules (SharedLibrary)
git submodule update --init --recursive
```

## Step 2: Start Infrastructure with Docker

The project requires PostgreSQL and Redis. Docker Compose handles this:

```powershell
# Start infrastructure services
docker compose up -d

# Verify containers are running
docker compose ps
```

You should see:
- `transactionservice-postgres` - PostgreSQL database
- `transactionservice-redis` - Redis cache

### Verify Database Connection

```powershell
# Test PostgreSQL connection
docker exec -it transactionservice-postgres psql -U postgres -c "SELECT version();"
```

## Step 3: Restore Dependencies

```powershell
# Restore NuGet packages
dotnet restore

# Build the solution
dotnet build
```

### Expected Output

```
Build succeeded.
    0 Warning(s)
    0 Error(s)
```

## Step 4: Apply Database Migrations

```powershell
# Navigate to API project
cd ExpenseVault.TransactionService.API

# Apply migrations
dotnet ef database update -p ../ExpenseVault.TransactionService.Infrastructure -s .
```

This creates the `transactiondb` database with all required tables.

## Step 5: Run the Service

```powershell
# Start the API
dotnet run

# Or with hot reload
dotnet watch run
```

### Expected Output

```
info: Microsoft.Hosting.Lifetime[14]
      Now listening on: http://localhost:9400
info: Microsoft.Hosting.Lifetime[0]
      Application started.
```

## Step 6: Explore the API

### Access Swagger UI

Open your browser and navigate to:
```
http://localhost:9400/swagger
```

### Test Health Endpoint

```powershell
# Using curl or PowerShell
Invoke-RestMethod -Uri "http://localhost:9400/health"
```

### Create Your First Transaction

Use the HTTP file in VS Code:

1. Open `ExpenseVault.TransactionService.API/ExpenseVault.TransactionService.API.http`
2. Click "Send Request" on the POST transaction request
3. Verify the response

Or use curl:

```powershell
$body = @{
    walletId = "550e8400-e29b-41d4-a716-446655440000"
    categoryId = "660e8400-e29b-41d4-a716-446655440001"
    amount = 50.00
    currency = "USD"
    type = 0
    description = "My first transaction"
    transactionDate = "2025-11-30T10:00:00Z"
} | ConvertTo-Json

Invoke-RestMethod -Uri "http://localhost:9400/api/transactions" `
    -Method Post `
    -ContentType "application/json" `
    -Body $body
```

## Step 7: Run Tests

```powershell
# Navigate back to root
cd ..

# Run all tests
dotnet test

# Run with verbose output
dotnet test --verbosity normal
```

### Expected Output

```
Passed!  - Failed: 0, Passed: 11, Skipped: 0, Total: 11
```

## Project Structure Overview

After setup, familiarize yourself with the project structure:

```
ExpenseVault.TransactionService/
├── ExpenseVault.TransactionService.API/           # API Layer
│   ├── Endpoints/                                  # FastEndpoints
│   └── Program.cs                                  # Application entry
│
├── ExpenseVault.TransactionService.Application/   # Application Layer
│   ├── DTOs/                                       # Data Transfer Objects
│   └── Features/                                   # CQRS Commands & Queries
│
├── ExpenseVault.TransactionService.Domain/        # Domain Layer
│   ├── Entities/                                   # Domain entities
│   ├── Enums/                                      # Enumerations
│   └── ValueObjects/                               # Value objects
│
├── ExpenseVault.TransactionService.Infrastructure/ # Infrastructure Layer
│   ├── Persistence/                                # EF Core DbContext
│   └── Migrations/                                 # Database migrations
│
└── tests/                                          # Test projects
```

## Common Issues and Solutions

### Port 9400 Already in Use

```powershell
# Find and kill process using port 9400
Get-NetTCPConnection -LocalPort 9400 | Select-Object OwningProcess
Stop-Process -Id <PID>
```

### Database Connection Failed

```powershell
# Restart PostgreSQL container
docker compose restart postgres

# Check container logs
docker compose logs postgres
```

### Submodule Issues

```powershell
# Re-initialize submodules
git submodule deinit -f .
git submodule update --init --recursive
```

## Next Steps

Now that you have the service running:

1. **Explore the API**: Try different endpoints using Swagger or the HTTP file
2. **Read the Architecture**: Check [Architecture Diagrams](../explanation/architecture/architecture-diagrams.md)
3. **Understand CQRS**: Review [ADR 002: CQRS with MediatR](../explanation/adr/002-mediatr-cqrs.md)
4. **Learn the Patterns**: Read [CLAUDE.md](../../CLAUDE.md)

---

**Need Help?**
- Check [How-To Guides](../how-to/) for specific tasks
- Read [Explanation](../explanation/) for concepts
- Review [Quick Reference](../reference/QUICK_REFERENCE.md) for commands

**Navigation**: [Tutorials Home](README.md) | [Documentation Map](../DOCUMENTATION_MAP.md)
