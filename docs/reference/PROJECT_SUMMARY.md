# Project Summary

<!-- Generated by Copilot -->

> High-level overview of the ExpenseVault.TransactionService project

## Overview

**ExpenseVault.TransactionService** is a .NET 10 microservice for managing financial transactions within the ExpenseVault ecosystem.

## Key Information

| Attribute | Value |
|-----------|-------|
| Framework | .NET 10 |
| API Framework | FastEndpoints |
| Database | PostgreSQL 16 |
| ORM | Entity Framework Core |
| Caching | HybridCache with Redis |
| Pattern | Clean Architecture + CQRS |
| Port | 9400 |

## Project Structure

```
ExpenseVault.TransactionService/
â”‚
â”œâ”€â”€ ExpenseVault.TransactionService.API/
â”‚   â”œâ”€â”€ Endpoints/Transactions/          # API endpoints
â”‚   â””â”€â”€ Program.cs                        # Application entry
â”‚
â”œâ”€â”€ ExpenseVault.TransactionService.Application/
â”‚   â”œâ”€â”€ DTOs/                             # Data Transfer Objects
â”‚   â””â”€â”€ Features/Transactions/            # Commands & Queries
â”‚
â”œâ”€â”€ ExpenseVault.TransactionService.Domain/
â”‚   â”œâ”€â”€ Entities/                         # Transaction, RecurringTransaction
â”‚   â”œâ”€â”€ ValueObjects/                     # Money, Location
â”‚   â””â”€â”€ Enums/                            # TransactionType, etc.
â”‚
â”œâ”€â”€ ExpenseVault.TransactionService.Infrastructure/
â”‚   â”œâ”€â”€ Persistence/                      # DbContext, Configurations
â”‚   â””â”€â”€ Migrations/                       # EF Migrations
â”‚
â”œâ”€â”€ ExpenseVault.SharedLibrary/           # Shared components (submodule)
â”‚
â””â”€â”€ tests/                                # Test projects
```

## Domain Model

### Entities

| Entity | Description |
|--------|-------------|
| Transaction | Core financial transaction record |
| RecurringTransaction | Scheduled recurring transaction template |
| TransactionAttachment | File attachments (receipts, invoices) |

### Value Objects

| Value Object | Description |
|--------------|-------------|
| Money | Amount with currency |
| Location | Geographic coordinates with address |

## API Endpoints

| Endpoint | Method | Description |
|----------|--------|-------------|
| `/api/transactions` | POST | Create transaction |
| `/api/transactions/{id}` | GET | Get by ID |
| `/api/transactions/wallet/{walletId}` | GET | Get by wallet (paged) |

## Technology Stack

### Core

- .NET 10 (Target Framework)
- FastEndpoints (Minimal API Framework)
- MediatR (CQRS Pattern)

### Data

- PostgreSQL 16 (Primary Database)
- Entity Framework Core (ORM)
- HybridCache with Redis (Caching)

### Observability

- Serilog (Structured Logging)
- OpenTelemetry (Distributed Tracing)

### Testing

- xUnit (Test Framework)
- FluentAssertions (Assertions)

## Architecture Decision Records (ADRs)

| ADR | Title | Status |
|-----|-------|--------|
| 001 | Clean Architecture | Accepted |
| 002 | CQRS with MediatR | Accepted |
| 003 | Direct DbContext (No Repository) | Accepted |
| 004 | HybridCache with Redis L2 | Accepted |
| 005 | OpenTelemetry Observability | Accepted |
| 006 | FastEndpoints Framework | Accepted |
| 007 | Database Partitioning Strategy | Accepted |
| 008 | Soft Delete Pattern | Accepted |
| 009 | External Identity Reference | Accepted |

See [ADRs folder](./adrs/) for full documentation.

## External Service Integration

### Identity Server (User Management)

| Aspect | Implementation |
|--------|----------------|
| Pattern | External Reference |
| Storage | `UserId` as Guid (no FK) |
| Fetching | Via gRPC/HTTP client |
| Caching | HybridCache (15 min TTL) |

> **Note**: TransactionService does not maintain a local User entity. User data lives in Identity Server. This ensures bounded context separation and service independence.

## Current Status

### âœ… Completed

- Clean Architecture structure
- Domain entities and value objects
- CQRS commands and queries
- EF Core configurations
- API endpoints
- Unit tests (11 passing)
- External identity reference pattern

### ðŸ”œ Planned

- Database partitioning (quarterly RANGE)
- Integration tests
- Additional query endpoints
- Recurring transaction automation
- Analytics endpoints
- Identity Server client integration

## Repository

- **Branch**: feat/set-up-project
- **Default Branch**: main

---

**Navigation**: [Reference Home](README.md) | [Documentation Map](../DOCUMENTATION_MAP.md)
