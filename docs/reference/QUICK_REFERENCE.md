# Quick Reference Card

<!-- Generated by Copilot -->

> Essential commands, shortcuts, and patterns for ExpenseVault.TransactionService

## Common Commands

### Build & Run

```powershell
# Build solution
dotnet build

# Run API
cd ExpenseVault.TransactionService.API
dotnet run

# Run with hot reload
dotnet watch run

# Run tests
dotnet test

# Run specific test project
dotnet test tests/ExpenseVault.TransactionService.Domain.UnitTests
```

### Docker

```powershell
# Start infrastructure
docker compose up -d

# Stop infrastructure
docker compose down

# View logs
docker compose logs -f

# Clean restart
docker compose down -v && docker compose up -d
```

### Database

```powershell
# Add migration
dotnet ef migrations add <Name> -p ExpenseVault.TransactionService.Infrastructure -s ExpenseVault.TransactionService.API

# Apply migrations
dotnet ef database update -p ExpenseVault.TransactionService.Infrastructure -s ExpenseVault.TransactionService.API

# Connect to PostgreSQL
docker exec -it transactionservice-postgres psql -U postgres -d transactiondb
```

### Git

```powershell
# Feature branch
git checkout -b feat/feature-name

# Submodule update
git submodule update --init --recursive
```

## API Endpoints

| Method | Endpoint | Description |
|--------|----------|-------------|
| POST | `/api/transactions` | Create transaction |
| GET | `/api/transactions/{id}` | Get by ID |
| GET | `/api/transactions/wallet/{walletId}` | Get by wallet (paged) |
| GET | `/health` | Health check |
| GET | `/swagger` | Swagger UI |

## Project Ports

| Service | Port | URL |
|---------|------|-----|
| API | 9400 | http://localhost:9400 |
| PostgreSQL | 5432 | localhost:5432 |
| Redis | 6379 | localhost:6379 |

## Project Structure

```
ExpenseVault.TransactionService/
├── .API/           → FastEndpoints, Program.cs
├── .Application/   → DTOs, Commands, Queries, Validators
├── .Domain/        → Entities, Value Objects, Enums
├── .Infrastructure/→ DbContext, EF Configurations
└── tests/          → Unit & Integration tests
```

## Domain Entities

| Entity | Key Properties |
|--------|----------------|
| Transaction | WalletId, CategoryId, Amount, Type, TransactionDate |
| RecurringTransaction | SourceTransactionId, Frequency, NextOccurrence |
| TransactionAttachment | TransactionId, FileName, AttachmentType |

## Value Objects

| Value Object | Properties |
|--------------|------------|
| Money | Amount, Currency |
| Location | Latitude, Longitude, Address |

## Enums

| Enum | Values |
|------|--------|
| TransactionType | Income (0), Expense (1), Transfer (2) |
| RecurrenceFrequency | Daily, Weekly, BiWeekly, Monthly, Quarterly, Yearly |
| AttachmentType | Receipt, Invoice, Document, Image, Other |

## Configuration

### appsettings.json

```json
{
  "ConnectionStrings": {
    "DefaultConnection": "Host=localhost;Port=5432;Database=transactiondb;Username=postgres;Password=postgres",
    "Redis": "localhost:6379"
  },
  "Caching": {
    "DefaultExpirationMinutes": 5,
    "KeyPrefix": "transaction:"
  }
}
```

## Testing

```powershell
# All tests
dotnet test

# With coverage
dotnet test --collect:"XPlat Code Coverage"

# Specific test
dotnet test --filter "FullyQualifiedName~TransactionTests"
```

## Troubleshooting

| Issue | Solution |
|-------|----------|
| Port in use | `Get-NetTCPConnection -LocalPort 9400` |
| DB connection failed | `docker compose restart postgres` |
| Redis connection failed | `docker compose restart redis` |
| Build errors | `dotnet restore && dotnet build` |

---

**Navigation**: [Reference Home](README.md) | [Documentation Map](../DOCUMENTATION_MAP.md)
